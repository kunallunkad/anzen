import{r as s,j as r,X as D}from"./index-Bqpro8KL.js";import{C as R}from"./chevron-down-D3Q6seEY.js";import{S as I}from"./search-DVwgCoyq.js";const T=/^(PT\.?\s*|CV\.?\s*|UD\.?\s*|TBK\.?\s*|LTD\.?\s*|CO\.?\s*)/i;function v(o){return o.replace(T,"").trim().toLowerCase()}function z({value:o,onChange:j,options:d,placeholder:N="Select...",className:C="",disabled:h=!1}){const[n,f]=s.useState(!1),[l,c]=s.useState(""),[x,u]=s.useState(-1),m=s.useRef(null),g=s.useRef(null),y=s.useRef(null),b=d.find(e=>e.value===o),i=s.useMemo(()=>{if(!l)return d;const e=l.toLowerCase().trim(),t=v(l);return d.filter(a=>{const k=a.label.toLowerCase(),E=v(a.label);return k.includes(e)||E.includes(t)})},[d,l]);s.useEffect(()=>{const e=t=>{m.current&&!m.current.contains(t.target)&&(f(!1),c(""))};if(n)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n]),s.useEffect(()=>{if(n){if(setTimeout(()=>{var e;return(e=y.current)==null?void 0:e.focus()},0),o&&!l){const e=i.findIndex(t=>t.value===o);e!==-1&&(u(e),p(e))}}else u(-1)},[n]),s.useEffect(()=>{u(-1)},[l]);const p=e=>{if(g.current){const t=g.current.children[e];t&&t.scrollIntoView({block:"nearest"})}},w=e=>{j(e),f(!1),c("")},S=e=>{if(e.key==="Escape"){e.preventDefault(),f(!1),c("");return}if(e.key==="ArrowDown"){e.preventDefault(),u(t=>{const a=t<i.length-1?t+1:t;return p(a),a});return}if(e.key==="ArrowUp"){e.preventDefault(),u(t=>{const a=t>0?t-1:0;return p(a),a});return}e.key==="Enter"&&(e.preventDefault(),x>=0&&x<i.length&&w(i[x].value))};return r.jsxs("div",{ref:m,className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>{h||(f(!n),c(""))},disabled:h,className:`w-full px-3 py-2 border rounded-lg text-left flex items-center justify-between ${h?"bg-gray-100 cursor-not-allowed":"bg-white hover:border-blue-500"} ${C}`,"aria-haspopup":"listbox","aria-expanded":n,children:[r.jsx("span",{className:`truncate ${b?"text-gray-900":"text-gray-400"}`,children:b?b.label:N}),r.jsx(R,{className:`w-4 h-4 text-gray-400 shrink-0 ml-2 transition-transform ${n?"rotate-180":""}`})]}),n&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl overflow-hidden",children:[r.jsx("div",{className:"p-2 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 border border-gray-200 rounded-lg px-2.5",children:[r.jsx(I,{className:"w-4 h-4 text-gray-400 shrink-0"}),r.jsx("input",{ref:y,type:"text",value:l,onChange:e=>c(e.target.value),onKeyDown:S,placeholder:"Type to search...",className:"flex-1 py-1.5 text-sm bg-transparent border-0 outline-none focus:ring-0"}),l&&r.jsx("button",{type:"button",onClick:()=>c(""),className:"p-0.5",children:r.jsx(D,{className:"w-3.5 h-3.5 text-gray-400"})})]})}),r.jsx("div",{ref:g,className:"max-h-56 overflow-y-auto",role:"listbox",children:i.length===0?r.jsx("div",{className:"px-3 py-3 text-sm text-gray-400 text-center",children:"No results found"}):i.map((e,t)=>r.jsx("div",{onClick:()=>w(e.value),className:`px-3 py-2 cursor-pointer text-sm ${t===x?"bg-blue-500 text-white":e.value===o?"bg-blue-50 text-blue-900":"text-gray-800 hover:bg-gray-50"}`,role:"option","aria-selected":e.value===o,children:e.label},e.value))})]})]})}export{z as S};
