import{r,j as e,i as g,s as u}from"./index-D377iWu2.js";import{U as p}from"./user-plus-CRFQRH5H.js";import{X as f}from"./x-circle-BISlCpkj.js";const i=[{email:"admin@pharma.com",password:"admin123",fullName:"Admin User",role:"admin"},{email:"accounts@pharma.com",password:"accounts123",fullName:"Accounts Manager",role:"accounts"},{email:"sales@pharma.com",password:"sales123",fullName:"Sales Representative",role:"sales"},{email:"warehouse@pharma.com",password:"warehouse123",fullName:"Warehouse Staff",role:"warehouse"}];function y(){const[c,n]=r.useState(!1),[l,o]=r.useState([]),[x,h]=r.useState(!0),b=async()=>{n(!0),o([]);const s=[];for(const a of i){try{const{data:t,error:m}=await u.auth.signUp({email:a.email,password:a.password});if(m){s.push({email:a.email,success:!1,message:`Auth error: ${m.message}`});continue}if(!t.user){s.push({email:a.email,success:!1,message:"No user data returned"});continue}const{error:d}=await u.from("user_profiles").insert({id:t.user.id,email:a.email,full_name:a.fullName,role:a.role,language:"en",is_active:!0});if(d){s.push({email:a.email,success:!1,message:`Profile error: ${d.message}`});continue}s.push({email:a.email,success:!0,message:`Created successfully (${a.role})`})}catch(t){s.push({email:a.email,success:!1,message:`Error: ${t.message}`})}o([...s])}n(!1)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl p-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:e.jsx(p,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900 mb-2",children:"Database Setup"}),e.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Create sample users for your Pharma Trading System"}),x&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Important Instructions:"}),e.jsxs("ol",{className:"text-sm text-blue-800 space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"This page will create 4 test users with their profiles"}),e.jsx("li",{children:"Make sure your Supabase email confirmation is disabled in your project settings"}),e.jsx("li",{children:"If email confirmation is enabled, you'll need to confirm emails manually"}),e.jsx("li",{children:"Click the button below to create all users at once"})]}),e.jsx("button",{onClick:()=>h(!1),className:"mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Got it, hide this"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Users to create:"}),e.jsx("div",{className:"space-y-2",children:i.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.email}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Password: ",s.password," | Role: ",s.role]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${s.role==="admin"?"bg-red-100 text-red-700":s.role==="accounts"?"bg-green-100 text-green-700":s.role==="sales"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:s.role})]},s.email))})]}),e.jsx("button",{onClick:b,disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg mb-6",children:c?"Creating Users...":"Create All Users"}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Results:"}),l.map((s,a)=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${s.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[s.success?e.jsx(g,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):e.jsx(f,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${s.success?"text-green-900":"text-red-900"}`,children:s.email}),e.jsx("div",{className:`text-sm ${s.success?"text-green-700":"text-red-700"}`,children:s.message})]})]},a))]}),l.length>0&&l.every(s=>s.success)&&e.jsxs("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-sm text-green-800 mb-3",children:"All users created successfully. You can now navigate to the login page and use any of these credentials:"}),e.jsx("div",{className:"text-sm text-green-800 space-y-1",children:i.map(s=>e.jsxs("div",{children:["â€¢ ",s.email," / ",s.password]},s.email))}),e.jsx("button",{onClick:()=>window.location.href="/",className:"mt-4 w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition font-medium",children:"Go to Login"})]}),l.length>0&&l.some(s=>!s.success)&&e.jsxs("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Partial Success"}),e.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"Some users failed to create. This is usually because:"}),e.jsxs("ul",{className:"text-sm text-yellow-800 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"The email already exists"}),e.jsx("li",{children:"Email confirmation is required (check Supabase Auth settings)"}),e.jsx("li",{children:"RLS policies prevented profile creation"})]}),e.jsx("p",{className:"text-sm text-yellow-800 mt-3",children:"See CREATE_USERS.md for manual setup instructions."})]})]})})}export{y as Setup};
