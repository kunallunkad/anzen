import{r as o,s as h,j as e,X as $,f as d}from"./index-05MON0zc.js";import{M as F}from"./Modal-DojL8f5j.js";import{S as ne}from"./SearchableSelect-rThwoRtO.js";import{F as le}from"./FileUpload-ffkhJ8e3.js";import{f as R}from"./dateFormat-E6B5rKFz.js";import{P as O}from"./plus-C8ciBmA_.js";import{S as ce}from"./search-CGgsAlNq.js";import{E as oe}from"./eye-ZtrRT66G.js";import"./chevron-down-C44n7mhs.js";import"./upload-BdstOxEa.js";import"./clipboard-bJertYRD.js";import"./file-B6--rgqI.js";import"./image-ButV3ySe.js";function ve({canManage:k}){var T;const[M,G]=o.useState([]),[C,V]=o.useState([]),[D,z]=o.useState([]),[N,B]=o.useState([]),[K,Q]=o.useState(!0),[W,f]=o.useState(!1),[X,I]=o.useState(!1),[m,E]=o.useState(null),[w,Y]=o.useState(""),[S,L]=o.useState(!1),[r,i]=o.useState({invoice_number:"",supplier_id:"",invoice_date:new Date().toISOString().split("T")[0],due_date:"",currency:"IDR",exchange_rate:1,faktur_pajak_number:"",notes:"",document_urls:[]}),[c,b]=o.useState([{item_type:"inventory",product_id:null,description:"",quantity:1,unit:"pcs",unit_price:0,line_total:0,expense_account_id:null,asset_account_id:null,tax_amount:0}]);o.useEffect(()=>{P(),H(),J(),Z()},[]);const P=async()=>{try{const{data:t,error:a}=await h.from("purchase_invoices").select("*, suppliers(company_name, pkp_status)").order("invoice_date",{ascending:!1});if(a)throw a;G(t||[])}catch(t){console.error("Error loading invoices:",t)}finally{Q(!1)}},H=async()=>{const{data:t}=await h.from("suppliers").select("id, company_name, npwp, pkp_status, address, contact_person, phone, email").order("company_name");V(t||[])},J=async()=>{const{data:t}=await h.from("products").select("id, product_name, unit, current_stock").order("product_name");z(t||[])},Z=async()=>{const{data:t}=await h.from("chart_of_accounts").select("id, code, name, account_type").in("account_type",["Expense","Asset","Cost of Goods Sold"]).order("code");B(t||[])},x=C.find(t=>t.id===r.supplier_id),ee=()=>{b([...c,{item_type:"inventory",product_id:null,description:"",quantity:1,unit:"pcs",unit_price:0,line_total:0,expense_account_id:null,asset_account_id:null,tax_amount:0}])},te=t=>{c.length>1&&b(c.filter((a,s)=>s!==t))},u=(t,a,s)=>{const n=[...c];if(n[t]={...n[t],[a]:s},(a==="quantity"||a==="unit_price")&&(n[t].line_total=n[t].quantity*n[t].unit_price),a==="item_type"&&(n[t].product_id=null,n[t].expense_account_id=null,n[t].asset_account_id=null,n[t].description=""),a==="product_id"&&s){const l=D.find(g=>g.id===s);l&&(n[t].description=l.product_name,n[t].unit=l.unit,n[t].product_name=l.product_name)}b(n)},U=()=>{const t=c.reduce((n,l)=>n+l.line_total,0),a=c.reduce((n,l)=>n+l.tax_amount,0),s=t+a;return{subtotal:t,taxTotal:a,total:s}},se=async t=>{var s;if(t.preventDefault(),!k){d({type:"error",title:"Error",message:"You do not have permission to create purchase invoices"});return}if(!r.supplier_id){d({type:"error",title:"Error",message:"Please select a supplier"});return}if(c.length===0||c.every(n=>n.line_total===0)){d({type:"error",title:"Error",message:"Please add at least one line item"});return}if(r.currency==="USD"&&r.exchange_rate<=1){d({type:"error",title:"Error",message:"Please enter a valid exchange rate for USD"});return}for(let n=0;n<c.length;n++){const l=c[n];if(l.item_type==="inventory"&&!l.product_id){d({type:"error",title:"Error",message:`Line ${n+1}: Please select a product for inventory items`});return}if(l.item_type==="expense"&&!l.expense_account_id){d({type:"error",title:"Error",message:`Line ${n+1}: Please select an expense account`});return}if(l.item_type==="fixed_asset"&&!l.asset_account_id){d({type:"error",title:"Error",message:`Line ${n+1}: Please select an asset account`});return}if(!l.description.trim()){d({type:"error",title:"Error",message:`Line ${n+1}: Please enter a description`});return}}const a=U();try{const{data:n}=await h.auth.getUser(),l={invoice_number:r.invoice_number.trim(),supplier_id:r.supplier_id,invoice_date:r.invoice_date,due_date:r.due_date||null,currency:r.currency,exchange_rate:r.exchange_rate,subtotal:a.subtotal,tax_amount:a.taxTotal,total_amount:a.total,paid_amount:0,balance_amount:a.total,status:"unpaid",faktur_pajak_number:r.faktur_pajak_number.trim()||null,notes:r.notes.trim()||null,document_urls:r.document_urls,requires_faktur_pajak:(x==null?void 0:x.pkp_status)||!1,created_by:(s=n.user)==null?void 0:s.id},{data:g,error:y}=await h.from("purchase_invoices").insert([l]).select().single();if(y)throw y;const q=c.map(p=>({purchase_invoice_id:g.id,item_type:p.item_type,product_id:p.product_id,description:p.description,quantity:p.quantity,unit:p.unit,unit_price:p.unit_price,line_total:p.line_total,tax_amount:p.tax_amount,expense_account_id:p.expense_account_id,asset_account_id:p.asset_account_id})),{error:v}=await h.from("purchase_invoice_items").insert(q);if(v)throw v;d({type:"success",title:"Success",message:"Purchase invoice created successfully!"}),_(),f(!1),P()}catch(n){console.error("Error creating purchase invoice:",n),d({type:"error",title:"Error",message:`Error: ${n.message}`})}},ae=async t=>{L(!0);try{const a=[];for(const s of t){const n=s.name.split(".").pop(),g=`purchase-invoices/${`${Date.now()}-${Math.random().toString(36).substring(7)}.${n}`}`,{error:y,data:q}=await h.storage.from("documents").upload(g,s);if(y)throw y;const{data:{publicUrl:v}}=h.storage.from("documents").getPublicUrl(g);a.push(v)}i(s=>({...s,document_urls:[...s.document_urls,...a]}))}catch(a){console.error("Error uploading files:",a),d({type:"error",title:"Error",message:`Error uploading files: ${a.message}`})}finally{L(!1)}},re=t=>{i(a=>({...a,document_urls:a.document_urls.filter((s,n)=>n!==t)}))},_=()=>{i({invoice_number:"",supplier_id:"",invoice_date:new Date().toISOString().split("T")[0],due_date:"",currency:"IDR",exchange_rate:1,faktur_pajak_number:"",notes:"",document_urls:[]}),b([{item_type:"inventory",product_id:null,description:"",quantity:1,unit:"pcs",unit_price:0,line_total:0,expense_account_id:null,asset_account_id:null,tax_amount:0}])},A=M.filter(t=>{var a,s;return t.invoice_number.toLowerCase().includes(w.toLowerCase())||((s=(a=t.suppliers)==null?void 0:a.company_name)==null?void 0:s.toLowerCase().includes(w.toLowerCase()))}),j=U();return K?e.jsx("div",{className:"p-8 text-center",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Purchase Invoices"}),k&&e.jsxs("button",{onClick:()=>{_(),f(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(O,{className:"w-4 h-4"}),"New Purchase Invoice"]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by invoice number or supplier...",value:w,onChange:t=>Y(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No purchase invoices found. Create your first one!"})}):A.map(t=>{var a;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.invoice_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(a=t.suppliers)==null?void 0:a.company_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R(t.invoice_date)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[t.currency,t.currency==="USD"&&e.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["@ ",t.exchange_rate.toLocaleString()]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 font-medium",children:[t.currency," ",t.total_amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsxs("span",{className:t.balance_amount>0?"text-red-600":"text-green-600",children:[t.currency," ",t.balance_amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.status==="paid"?"bg-green-100 text-green-800":t.status==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>{E(t),I(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:e.jsx(oe,{className:"w-4 h-4"})})})]},t.id)})})]})}),e.jsx(F,{isOpen:W,onClose:()=>{f(!1),_()},title:"New Purchase Invoice",children:e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier *"}),e.jsx(ne,{value:r.supplier_id,onChange:t=>i({...r,supplier_id:t}),options:C.map(t=>({value:t.id,label:`${t.company_name}${t.pkp_status?" (PKP)":""}`})),placeholder:"Select Supplier"}),x&&x.npwp&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["NPWP: ",x.npwp]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Number *"}),e.jsx("input",{type:"text",value:r.invoice_number,onChange:t=>i({...r,invoice_number:t.target.value}),required:!0,placeholder:"INV-001",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Date *"}),e.jsx("input",{type:"date",value:r.invoice_date,onChange:t=>i({...r,invoice_date:t.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:r.due_date,onChange:t=>i({...r,due_date:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency *"}),e.jsxs("select",{value:r.currency,onChange:t=>i({...r,currency:t.target.value,exchange_rate:t.target.value==="IDR"?1:r.exchange_rate}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"IDR",children:"IDR"}),e.jsx("option",{value:"USD",children:"USD"})]})]}),r.currency==="USD"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exchange Rate * (1 USD = ? IDR)"}),e.jsx("input",{type:"number",value:r.exchange_rate,onChange:t=>i({...r,exchange_rate:parseFloat(t.target.value)||1}),min:"1",step:"0.01",required:!0,placeholder:"15750",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(x==null?void 0:x.pkp_status)&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Faktur Pajak Number"}),e.jsx("input",{type:"text",value:r.faktur_pajak_number,onChange:t=>i({...r,faktur_pajak_number:t.target.value}),placeholder:"010.000-00.00000000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:r.notes,onChange:t=>i({...r,notes:t.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attachments (Supplier Invoice)"}),e.jsx(le,{onUpload:ae,accept:".pdf,.jpg,.jpeg,.png",multiple:!0,disabled:S}),r.document_urls.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:r.document_urls.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate",children:t.split("/").pop()}),e.jsx("button",{type:"button",onClick:()=>re(a),className:"text-red-600 hover:text-red-800",children:e.jsx($,{className:"w-4 h-4"})})]},a))})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Line Items"}),e.jsxs("button",{type:"button",onClick:ee,className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx(O,{className:"w-4 h-4"}),"Add Line"]})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:c.map((t,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Line ",a+1]}),c.length>1&&e.jsx("button",{type:"button",onClick:()=>te(a),className:"text-red-600 hover:text-red-800",children:e.jsx($,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{value:t.item_type,onChange:s=>u(a,"item_type",s.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"inventory",children:"Inventory (Stock)"}),e.jsx("option",{value:"fixed_asset",children:"Fixed Asset"}),e.jsx("option",{value:"expense",children:"Expense"}),e.jsx("option",{value:"freight",children:"Freight"}),e.jsx("option",{value:"duty",children:"Import Duty"}),e.jsx("option",{value:"insurance",children:"Insurance"}),e.jsx("option",{value:"clearing",children:"Clearing & Forwarding"}),e.jsx("option",{value:"other",children:"Other Cost"})]})]}),t.item_type==="inventory"?e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product *"}),e.jsxs("select",{value:t.product_id||"",onChange:s=>u(a,"product_id",s.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Product"}),D.map(s=>e.jsxs("option",{value:s.id,children:[s.product_name," (Stock: ",s.current_stock,")"]},s.id))]})]}):t.item_type==="expense"?e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expense Account *"}),e.jsxs("select",{value:t.expense_account_id||"",onChange:s=>u(a,"expense_account_id",s.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Account"}),N.filter(s=>s.account_type==="Expense"||s.account_type==="Cost of Goods Sold").map(s=>e.jsxs("option",{value:s.id,children:[s.code," - ",s.name]},s.id))]})]}):t.item_type==="fixed_asset"?e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Asset Account *"}),e.jsxs("select",{value:t.asset_account_id||"",onChange:s=>u(a,"asset_account_id",s.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Account"}),N.filter(s=>s.account_type==="Asset").map(s=>e.jsxs("option",{value:s.id,children:[s.code," - ",s.name]},s.id))]})]}):e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ledger (Optional - defaults to Inventory)"}),e.jsxs("select",{value:t.expense_account_id||"",onChange:s=>u(a,"expense_account_id",s.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Capitalize to Inventory (Default)"}),N.filter(s=>s.account_type==="Expense"||s.account_type==="Cost of Goods Sold").map(s=>e.jsxs("option",{value:s.id,children:[s.code," - ",s.name]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("input",{type:"text",value:t.description,onChange:s=>u(a,"description",s.target.value),placeholder:"Item description",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Qty *"}),e.jsx("input",{type:"number",value:t.quantity,onChange:s=>u(a,"quantity",parseFloat(s.target.value)||0),min:"0",step:"0.01",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:t.unit,onChange:s=>u(a,"unit",s.target.value),placeholder:"pcs",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Rate *"}),e.jsx("input",{type:"number",value:t.unit_price,onChange:s=>u(a,"unit_price",parseFloat(s.target.value)||0),min:"0",step:"0.01",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tax"}),e.jsx("input",{type:"number",value:t.tax_amount,onChange:s=>u(a,"tax_amount",parseFloat(s.target.value)||0),min:"0",step:"0.01",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("input",{type:"text",value:t.line_total.toLocaleString(),readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded bg-gray-50 font-medium"})]})]})]},a))}),e.jsxs("div",{className:"mt-6 border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:[r.currency," ",j.subtotal.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"font-medium",children:[r.currency," ",j.taxTotal.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-blue-600",children:[r.currency," ",j.total.toLocaleString()]})]}),r.currency==="USD"&&r.exchange_rate>1&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Equivalent (IDR):"}),e.jsxs("span",{children:["IDR ",(j.total*r.exchange_rate).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),_()},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:S,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:S?"Uploading...":"Create Invoice"})]})]})}),m&&e.jsx(F,{isOpen:X,onClose:()=>{I(!1),E(null)},title:`Purchase Invoice: ${m.invoice_number}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Supplier:"}),e.jsx("p",{className:"font-medium",children:(T=m.suppliers)==null?void 0:T.company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Invoice Date:"}),e.jsx("p",{className:"font-medium",children:R(m.invoice_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Currency:"}),e.jsx("p",{className:"font-medium",children:m.currency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Total:"}),e.jsxs("p",{className:"font-medium text-lg",children:[m.currency," ",m.total_amount.toLocaleString()]})]})]}),m.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Notes:"}),e.jsx("p",{className:"text-sm",children:m.notes})]})]})})]})}export{ve as PurchaseInvoiceManager};
